<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Challenge</title>
    <style>
        :root {
            --bg: #2b0202;
            --gold: #d4af37;
            --neon: #00f2ff;
        }

        body {
            background-color: var(--bg);
            color: white;
            font-family: 'Georgia', serif;
            margin: 0; padding: 0;
            height: 100vh;
            display: flex; justify-content: center; align-items: center;
            overflow: hidden; text-align: center;
        }

        #canvas {
            position: fixed; top: 0; left: 0;
            pointer-events: none; z-index: 1;
        }

        .ui-wrapper { position: relative; z-index: 10; width: 90%; max-width: 400px; }

        /* STAGE 1: THE CHOICE */
        .btn-container { 
            display: flex; justify-content: center; align-items: center; 
            gap: 20px; margin-top: 30px; height: 100px; 
        }
        #yes-btn {
            background: var(--gold); color: black; border: none;
            padding: 15px 30px; border-radius: 50px; font-weight: bold;
            cursor: pointer; transition: 0.2s; font-size: 1.1rem;
        }
        #no-btn {
            background: #555; color: white; border: none;
            padding: 10px 20px; border-radius: 50px;
            cursor: pointer; transition: 0.2s;
        }
        #pew { 
            position: absolute; top: -30px; width: 100%; 
            color: var(--gold); font-weight: bold; display: none; 
        }

        /* STAGE 2: THE KURDISH SLIDER */
        #slider-stage { display: none; }
        .kurdish-txt { font-size: 1.8rem; color: var(--gold); margin-bottom: 15px; }
        #percentage { font-size: 4rem; font-weight: bold; margin: 20px 0; transition: 0.3s; }
        .neon { color: var(--neon); text-shadow: 0 0 20px var(--neon); }
        input[type=range] { width: 100%; accent-color: var(--gold); cursor: pointer; }

        /* STAGE 3: THE GRAND FINALE */
        #final-stage { display: none; animation: popIn 1s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .big-heart { font-size: 6rem; margin-bottom: 10px; filter: drop-shadow(0 0 20px #ff2e2e); }
        .bouquet { font-size: 5rem; margin-bottom: 20px; }
        .arabic-poetry { font-size: 1.5rem; color: var(--gold); direction: rtl; line-height: 2; }

        @keyframes popIn { 0% { transform: scale(0.5); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body>

<canvas id="canvas"></canvas>

<div class="ui-wrapper">
    <div id="q-stage">
        <h1 style="font-size: 2.5rem;">Do you love me?</h1>
        <div class="btn-container" style="position: relative;">
            <div id="pew">( pew )</div>
            <button id="yes-btn" onclick="openSlider()">YES</button>
            <button id="no-btn" onclick="shrinkNo()">NO</button>
        </div>
    </div>

    <div id="slider-stage">
        <div class="kurdish-txt">Chand amnt xosh dawy?</div>
        <div id="percentage">0%</div>
        <input type="range" id="love-slider" min="0" max="1000" value="0" oninput="handleSlide(this.value)">
        <p style="opacity: 0.5; margin-top: 15px;">Keep pulling for a surprise...</p>
    </div>

    <div id="final-stage">
        <div class="big-heart">â¤ï¸</div>
        <div class="bouquet">ğŸ’ğŸŒ¹ğŸ’</div>
        <div class="arabic-poetry">
            Ø£ÙØ­Ø¨Ù‘ÙÙƒÙ Ø¬ÙØ¯Ù‘Ø§Ù‹..<br>
            ÙˆØ£Ø¹Ø±ÙÙ Ø£Ù†Ù‘Ù Ø§Ù„Ø·Ø±ÙŠÙ‚Ù Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ­ÙŠÙ„Ù Ø·ÙˆÙŠÙ€Ù„Ù’<br>
            ÙˆØ£Ø¹Ø±ÙÙ Ø£Ù†Ù‘ÙÙƒÙ Ø³ØªÙ Ø§Ù„Ù†Ø³Ø§Ø¡ <br>
            ÙˆÙ„ÙŠØ³Ù Ù„Ø¯ÙŠÙ‘Ù Ø¨Ø¯ÙŠÙ€Ù„Ù’<br>
            Ø£ÙØ­Ø¨Ù‘ÙÙƒÙ Ø¬ÙØ¯Ù‘Ø§Ù‹..
        </div>
        <p style="margin-top: 15px; font-weight: bold; color: var(--gold); letter-spacing: 1px;">I Love You Forever</p>
    </div>
</div>

<script>
    let noScale = 1;
    let yesScale = 1;
    let bloomLevel = 0;

    function shrinkNo() {
        noScale -= 0.15;
        yesScale += 0.25;
        const noBtn = document.getElementById('no-btn');
        const yesBtn = document.getElementById('yes-btn');
        const pew = document.getElementById('pew');
        noBtn.style.transform = `scale(${noScale})`;
        yesBtn.style.transform = `scale(${yesScale})`;
        pew.style.display = 'block';
        setTimeout(() => { pew.style.display = 'none'; }, 500);
        if (noScale <= 0.1) noBtn.style.display = 'none';
    }

    function openSlider() {
        document.getElementById('q-stage').style.display = 'none';
        document.getElementById('slider-stage').style.display = 'block';
    }

    function handleSlide(val) {
        const pDisplay = document.getElementById('percentage');
        pDisplay.innerText = val + "%";
        bloomLevel = val;

        if(val > 100) pDisplay.classList.add('neon');
        else pDisplay.classList.remove('neon');

        if(val >= 1000) {
            setTimeout(() => {
                document.getElementById('slider-stage').style.display = 'none';
                document.getElementById('final-stage').style.display = 'block';
            }, 500);
        }
    }

    // Animation Logic
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.onresize = resize; resize();

    class Item {
        constructor() { this.reset(); }
        reset() {
            this.x = Math.random() * canvas.width;
            this.y = canvas.height + 50;
            this.type = Math.random() > 0.5 ? 'â¤ï¸' : 'ğŸŒ¸';
            this.size = Math.random() * 20 + 10;
            this.speed = Math.random() * 3 + 1;
        }
        update() {
            this.y -= this.speed;
            if (this.y < -50) this.reset();
        }
        draw() {
            ctx.font = `${this.size}px serif`;
            ctx.fillText(this.type, this.x, this.y);
        }
    }

    for(let i=0; i<100; i++) particles.push(new Item());

    function render() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        let activeItems = Math.floor(bloomLevel / 8); 
        for(let i=0; i < activeItems; i++) {
            particles[i].update();
            particles[i].draw();
        }
        requestAnimationFrame(render);
    }
    render();
</script>
</body>
</html>
